{"ast":null,"code":"import _classCallCheck from\"/Users/desireebradish/news-explorer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/desireebradish/news-explorer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var token=localStorage.getItem(\"token\");var MainApi=/*#__PURE__*/function(){function MainApi(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,MainApi);this._baseUrl=baseUrl;this._headers=headers;}_createClass(MainApi,[{key:\"getUserInfo\",value:function getUserInfo(){return fetch(this._baseUrl+'users/me',{headers:this._headers}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.status));});}},{key:\"getArticles\",value:function getArticles(){return fetch(this._baseUrl+\"articles\",{method:\"GET\",headers:this._headers}).then(function(res){return res.json();});}},{key:\"saveArticle\",value:function saveArticle(_ref2){var title=_ref2.title,description=_ref2.description,url=_ref2.url,urlToImage=_ref2.urlToImage,publishedAt=_ref2.publishedAt,keyword=_ref2.keyword,source=_ref2.source;return fetch(this._baseUrl+'articles',{method:\"POST\",headers:this._headers,body:JSON.stringify({title:title,description:description,url:url,urlToImage:urlToImage,publishedAt:publishedAt,keyword:keyword,source:source})}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.status));});}},{key:\"deleteArticle\",value:function deleteArticle(articleId){return fetch(this._baseUrl+'articles/'+articleId,{method:\"DELETE\",headers:this._headers}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.status));});// .then(async res => {\n//     try {\n//     const data = await res.json();\n//     console.log('response data?', data)\n//     }\n//     catch(error){\n//         console.log('Error Happened')\n//         console.log(error)\n//     }\n// }\n// )\n}},{key:\"register\",value:function register(email,password,name){return fetch(this._baseUrl+'signup',{method:'POST',headers:this._headers,body:JSON.stringify({email:email,password:password,name:name})}).then(function(res){return res.json();});}},{key:\"authorize\",value:function authorize(email,password){return fetch(this._baseUrl+'signin',{method:'POST',headers:this._headers,body:JSON.stringify({email:email,password:password})}).then(function(res){return res.json();});}},{key:\"checkToken\",value:function checkToken(token){return fetch(this._baseUrl+'users/me',{method:'GET',headers:this._headers}).then(function(res){return res.json();}).then(function(data){return data;});}}]);return MainApi;}();export var mainApi=new MainApi({// baseUrl: 'https://api.desinews.students.nomoreparties.site/',\nbaseUrl:'https://34.125.192.74:3000/',headers:{'Accept':\"application/json\",'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});","map":{"version":3,"sources":["/Users/desireebradish/news-explorer-frontend/src/utils/MainApi.js"],"names":["token","localStorage","getItem","MainApi","baseUrl","headers","_baseUrl","_headers","fetch","then","res","ok","json","Promise","reject","status","method","title","description","url","urlToImage","publishedAt","keyword","source","body","JSON","stringify","articleId","email","password","name","data","mainApi"],"mappings":"oUAAA,GAAMA,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,C,GACMC,CAAAA,O,yBACF,sBAAkC,IAApBC,CAAAA,OAAoB,MAApBA,OAAoB,CAAXC,OAAW,MAAXA,OAAW,+BAC9B,KAAKC,QAAL,CAAgBF,OAAhB,CACA,KAAKG,QAAL,CAAgBF,OAAhB,CACH,C,+CAED,sBAAc,CACV,MAAOG,CAAAA,KAAK,CAAC,KAAKF,QAAL,CAAgB,UAAjB,CAA6B,CACrCD,OAAO,CAAE,KAAKE,QADuB,CAA7B,CAAL,CAGFE,IAHE,CAGG,SAAAC,GAAG,CAAI,CACT,GAAIA,GAAG,CAACC,EAAR,CAAY,CACR,MAAOD,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACH,CACD,MAAOC,CAAAA,OAAO,CAACC,MAAR,kBAAyBJ,GAAG,CAACK,MAA7B,EAAP,CACH,CARE,CAAP,CASH,C,2BAID,sBAAc,CACV,MAAOP,CAAAA,KAAK,CAAC,KAAKF,QAAL,CAAgB,UAAjB,CAA6B,CACrCU,MAAM,CAAE,KAD6B,CAErCX,OAAO,CAAE,KAAKE,QAFuB,CAA7B,CAAL,CAIFE,IAJE,CAIG,SAAAC,GAAG,CAAI,CAAE,MAAOA,CAAAA,GAAG,CAACE,IAAJ,EAAP,CAAmB,CAJ/B,CAAP,CAMH,C,2BACH,2BAAmF,IAArEK,CAAAA,KAAqE,OAArEA,KAAqE,CAA9DC,WAA8D,OAA9DA,WAA8D,CAAjDC,GAAiD,OAAjDA,GAAiD,CAA5CC,UAA4C,OAA5CA,UAA4C,CAAhCC,WAAgC,OAAhCA,WAAgC,CAAnBC,OAAmB,OAAnBA,OAAmB,CAAVC,MAAU,OAAVA,MAAU,CAC7E,MAAOf,CAAAA,KAAK,CAAC,KAAKF,QAAL,CAAgB,UAAjB,CAA6B,CACrCU,MAAM,CAAE,MAD6B,CAErCX,OAAO,CAAE,KAAKE,QAFuB,CAGrCiB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBT,KAAK,CAALA,KADiB,CAEjBC,WAAW,CAAXA,WAFiB,CAGjBC,GAAG,CAAHA,GAHiB,CAIjBC,UAAU,CAAVA,UAJiB,CAKjBC,WAAW,CAAXA,WALiB,CAMjBC,OAAO,CAAPA,OANiB,CAOjBC,MAAM,CAANA,MAPiB,CAAf,CAH+B,CAA7B,CAAL,CAaFd,IAbE,CAaG,SAAAC,GAAG,CAAI,CACT,GAAIA,GAAG,CAACC,EAAR,CAAY,CACR,MAAOD,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACH,CACD,MAAOC,CAAAA,OAAO,CAACC,MAAR,kBAAyBJ,GAAG,CAACK,MAA7B,EAAP,CACH,CAlBE,CAAP,CAmBH,C,6BAID,uBAAcY,SAAd,CAAyB,CACrB,MAAOnB,CAAAA,KAAK,CAAC,KAAKF,QAAL,CAAgB,WAAhB,CAA8BqB,SAA/B,CAA0C,CAClDX,MAAM,CAAE,QAD0C,CAElDX,OAAO,CAAE,KAAKE,QAFoC,CAA1C,CAAL,CAIFE,IAJE,CAIG,SAAAC,GAAG,CAAI,CACT,GAAIA,GAAG,CAACC,EAAR,CAAY,CACR,MAAOD,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACH,CACD,MAAOC,CAAAA,OAAO,CAACC,MAAR,kBAAyBJ,GAAG,CAACK,MAA7B,EAAP,CACH,CATE,CAAP,CAUI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,C,wBAGL,kBAASa,KAAT,CAAgBC,QAAhB,CAA0BC,IAA1B,CAAgC,CAC5B,MAAOtB,CAAAA,KAAK,CAAC,KAAKF,QAAL,CAAgB,QAAjB,CAA2B,CACnCU,MAAM,CAAE,MAD2B,CAEnCX,OAAO,CAAE,KAAKE,QAFqB,CAGnCiB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEE,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAmBC,IAAI,CAAJA,IAAnB,CAAf,CAH6B,CAA3B,CAAL,CAKFrB,IALE,CAKG,SAACC,GAAD,CAAS,CACP,MAAOA,CAAAA,GAAG,CAACE,IAAJ,EAAP,CAEP,CARE,CAAP,CASH,C,yBAKD,mBAAUgB,KAAV,CAAiBC,QAAjB,CAA2B,CACvB,MAAOrB,CAAAA,KAAK,CAAC,KAAKF,QAAL,CAAgB,QAAjB,CAA2B,CACnCU,MAAM,CAAE,MAD2B,CAEnCX,OAAO,CAAE,KAAKE,QAFqB,CAGnCiB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEE,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CAH6B,CAA3B,CAAL,CAKFpB,IALE,CAKG,SAAAC,GAAG,CAAI,CACT,MAAOA,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACH,CAPE,CAAP,CAQH,C,0BAED,oBAAWZ,KAAX,CAAkB,CACd,MAAOQ,CAAAA,KAAK,CAAC,KAAKF,QAAL,CAAgB,UAAjB,CAA6B,CACrCU,MAAM,CAAE,KAD6B,CAErCX,OAAO,CAAE,KAAKE,QAFuB,CAA7B,CAAL,CAIFE,IAJE,CAIG,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACE,IAAJ,EAAJ,EAJN,EAKFH,IALE,CAKG,SAAAsB,IAAI,QAAIA,CAAAA,IAAJ,EALP,CAAP,CAMH,C,uBAML,MAAO,IAAMC,CAAAA,OAAO,CAAG,GAAI7B,CAAAA,OAAJ,CAAY,CAC/B;AACAC,OAAO,CAAE,6BAFsB,CAG/BC,OAAO,CAAE,CACP,SAAU,kBADH,CAET,eAAgB,kBAFP,CAGT,iCAA2BL,KAA3B,CAHS,CAHsB,CAAZ,CAAhB","sourcesContent":["const token = localStorage.getItem(\"token\");\nclass MainApi {\n    constructor({ baseUrl, headers }) {\n        this._baseUrl = baseUrl;\n        this._headers = headers;\n    }\n\n    getUserInfo() {\n        return fetch(this._baseUrl + 'users/me', {\n            headers: this._headers,\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json();\n                }\n                return Promise.reject(`Error: ${res.status}`)\n            })\n    }\n\n    \n\n    getArticles() {\n        return fetch(this._baseUrl + \"articles\", {\n            method: \"GET\",\n            headers: this._headers\n        })\n            .then(res => { return res.json() }\n            )\n    }\n  saveArticle({ title, description, url, urlToImage, publishedAt, keyword, source }) {\n        return fetch(this._baseUrl + 'articles', {\n            method: \"POST\",\n            headers: this._headers,\n            body: JSON.stringify({\n                title,\n                description,\n                url,\n                urlToImage,\n                publishedAt,\n                keyword,\n                source\n            })\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json();\n                }\n                return Promise.reject(`Error: ${res.status}`)\n            })\n    }\n\n\n\n    deleteArticle(articleId) {\n        return fetch(this._baseUrl + 'articles/' + articleId, {\n            method: \"DELETE\",\n            headers: this._headers\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json();\n                }\n                return Promise.reject(`Error: ${res.status}`)\n            })\n            // .then(async res => {\n            //     try {\n            //     const data = await res.json();\n            //     console.log('response data?', data)\n            //     }\n            //     catch(error){\n            //         console.log('Error Happened')\n            //         console.log(error)\n            //     }\n            // }\n            // )\n        } \n    \n\n    register(email, password, name) {\n        return fetch(this._baseUrl + 'signup', {\n            method: 'POST',\n            headers: this._headers,\n            body: JSON.stringify({ email, password, name })\n        })\n            .then((res) => {\n                    return res.json();\n           \n            })\n    }\n\n\n    \n\n    authorize(email, password) {\n        return fetch(this._baseUrl + 'signin', {\n            method: 'POST',\n            headers: this._headers,\n            body: JSON.stringify({ email, password })\n        })\n            .then(res => {\n                return res.json()\n            })\n    }\n\n    checkToken(token) {\n        return fetch(this._baseUrl + 'users/me', {\n            method: 'GET',\n            headers: this._headers\n        })\n            .then(res => res.json())\n            .then(data => data)\n    }\n\n\n  \n}\n\nexport const mainApi = new MainApi({\n    // baseUrl: 'https://api.desinews.students.nomoreparties.site/',\n    baseUrl: 'https://34.125.192.74:3000/',\n    headers: {\n      'Accept': \"application/json\",\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${token}`\n}\n});\n"]},"metadata":{},"sourceType":"module"}